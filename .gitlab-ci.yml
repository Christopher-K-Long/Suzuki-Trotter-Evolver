# .gitlab-ci.yml

variables:
  # Change this URL to your source GitHub repository.
  GITHUB_REPO_URL: "https://github.com/Christopher-K-Long/Suzuki-Trotter-Evolver.git"
  GIT_STRATEGY: none

sync_from_github:
  stage: deploy
  image:
    name: alpine/git:latest
    entrypoint: [""]

  script:
    - echo "Starting clean-room sync..."
    - git clone --mirror $GITHUB_REPO_URL .
    - git push --mirror "https://gitlab-ci:${GITLAB_PUSH_TOKEN}@${CI_PROJECT_URL#https://}"
    - echo "Sync complete."

  rules:
    - if: '$CI_PIPELINE_SOURCE == "trigger"'
